<!-- Hero Section (mobile-first) -->
<section class="hero">
  <div class="hero-slider">

    <!-- MOBILE CARD LAYOUT (shown on narrow screens) -->
    <div class="mobile-cards">
      <div
        class="mobile-card"
        *ngFor="let slide of slides; let i = index"
        [class.active]="i === currentIndex"
        [style.background]="slide.mobile.bgColor || '#2e7d32'"
        role="group"
        aria-roledescription="slide"
        [attr.aria-label]="slide.mobile.caption + ' - ' + slide.mobile.sub"
      >
        <div class="mobile-card-inner">
          <div class="mobile-text">
            <div class="badge">Offer</div>
            <h2 class="mobile-title">{{ slide.mobile.caption }}</h2>
            <p class="mobile-sub">{{ slide.mobile.sub }}</p>
            <a routerLink="/product-list" class="cta-btn">Shop Now</a>
          </div>

          <div class="mobile-visual">
            <img [src]="slide.mobile.productImage" [alt]="slide.mobile.caption" loading="lazy" />
          </div>
        </div>
      </div>
    </div>

    <!-- DESKTOP / TABLET: full-bleed image slider -->
    <div class="desktop-slides">
      <div class="slide" *ngFor="let slide of slides; let i = index" [class.active]="i === currentIndex" role="group" aria-roledescription="slide" [attr.aria-label]="slide.title || slide.mobile.caption">
        <img [src]="slide.image" alt="{{ slide.title || slide.mobile.caption }}" loading="lazy" />
        <div class="slide-content">
          <h1>{{ slide.title || slide.mobile.caption }}</h1>
          <p>{{ slide.subtitle || slide.mobile.sub }}</p>
          <a routerLink="/product-list" class="cta-btn">Shop Now</a>
        </div>
      </div>
    </div>

    <!-- Carousel controls (shared) -->
    <button class="arrow left" (click)="prevSlide()" aria-label="Previous">‹</button>
    <button class="arrow right" (click)="nextSlide()" aria-label="Next">›</button>

    <div class="dots" aria-hidden="false">
      <button *ngFor="let s of slides; let i = index" (click)="goToSlide(i)" [class.active]="i===currentIndex" [attr.aria-pressed]="i===currentIndex" aria-label="Go to slide {{i+1}}"></button>
    </div>
  </div>
</section>

<!-- Featured Products -->
<!-- Featured products slider (mobile-first) -->
<section class="fp-section" aria-label="Featured products carousel">
  <div class="fp-header">
    <h2>Featured Products</h2>
    <a routerLink="/product-list" class="fp-all">View All →</a>
  </div>

  <div class="fp-viewport"
       (touchstart)="fpTouchStart($event)"
       (touchmove)="fpTouchMove($event)"
       (touchend)="fpTouchEnd($event)"
       (mouseenter)="stopFpAuto()"
       (mouseleave)="startFpAuto()"
       tabindex="0"
       (keydown.arrowLeft)="prevFp()"
       (keydown.arrowRight)="nextFp()">

    <div class="fp-track" [style.transform]="'translateX(' + (-fpIndex * 100) + '%)'" 
         [class.dragging]="fpDragging">
      <div class="fp-slide" *ngFor="let p of featuredProducts; let i = index" [class.center]="i === fpIndex">
        <!-- <a [routerLink]="['/products', p.id]" class="fp-card">
  <div class="fp-img-wrap">
    <img [src]="imgUrl((p.images && p.images.length) ? p.images[0] : '/assets/placeholder.png')" [alt]="p.name" (error)="onImgError($event)"/>
  </div>
          <div class="fp-body">
            <h3 class="fp-name">{{ p.name }}</h3>
            <div class="fp-price">
              ₹{{ p.price | number:'1.0-0' }}
              <span *ngIf="p.mrp" class="fp-mrp">₹{{ p.mrp | number:'1.0-0' }}</span>
            </div>
          </div>
        </a> -->
        <a [routerLink]="['/products', p.id]" class="fp-card vertical">
  <div class="fp-img-wrap">
    <img
      [src]="imgUrl((p.images && p.images.length) ? p.images[0] : '/assets/placeholder.png')"
      [alt]="p.name"
      (error)="onImgError($event)"
    />
  </div>

  <div class="fp-body">
    <h3 class="fp-name">{{ p.name }}</h3>
    <div class="fp-price">
      ₹{{ p.price | number:'1.0-0' }}
      <span *ngIf="p.mrp" class="fp-mrp">₹{{ p.mrp | number:'1.0-0' }}</span>
    </div>
  </div>
</a>
      </div>
    </div>
  </div>

  <div class="fp-controls">
    <!-- <button class="fp-arrow" (click)="prevFp()" aria-label="Previous product">‹</button> -->
    <div class="fp-dots" role="tablist">
      <button *ngFor="let p of featuredProducts; let i = index" (click)="goToFp(i)" [class.active]="i === fpIndex" [attr.aria-pressed]="i===fpIndex" [attr.aria-label]="'Go to product ' + (i+1)"></button>
    </div>
    <!-- <button class="fp-arrow" (click)="nextFp()" aria-label="Next product">›</button> -->
  </div>
</section>
<!-- Why choose us -->
<section class="why-choose-us">
  <h2>Why Choose Us</h2>
  <div class="features">
    <div class="feature" *ngFor="let f of features">
      <img [src]="f.icon" alt="{{f.title}}">
      <h3>{{ f.title }}</h3>
      <p>{{ f.text }}</p>
    </div>
  </div>
</section>



<!-- Blogs Preview -->
<section class="blogs">
  <h2 class="section-title">Tips & Guides for a Healthier You</h2>
  <div class="blogs-grid">
    <div *ngFor="let b of featuredBlogs" class="blog-card">
      <img [src]="blogPlaceholder" alt="{{b.title}}" class="blog-img" />
      <div class="blog-content">
        <h3 class="blog-title">{{ b.title }}</h3>
        <p class="blog-excerpt" [innerHTML]="shorten(b.summary || b.content, 140)"></p>
        <a [routerLink]="['/blogs', b.id]" class="read-more">Read More →</a>
      </div>
    </div>
  </div>
  <a routerLink="/blogs" class="view-all">View All →</a>
</section>

<!-- Testimonials (static for now) -->
<section class="testimonials">
  <h2 class="section-title">Real People, Real Transformations</h2>
  <div class="testimonials-grid">
    <div class="testimonial-card" *ngFor="let t of testimonials">
      <img [src]="t.img" alt="{{ t.name }}" class="testimonial-img" />
      <p class="testimonial-quote">{{ t.quote }}</p>
      <h4 class="testimonial-name">{{ t.name }}</h4>
      <div class="stars">{{ t.stars }}</div>
    </div>
  </div>
  <a routerLink="/success-stories" class="view-all">View All →</a>
</section>
