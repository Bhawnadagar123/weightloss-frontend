<header class="navbar">

  <!-- ğŸŒ¿ Announcement / Offer Bar -->
<div class="announcement-bar" *ngIf="showAnnouncement">
  <div class="announcement-wrapper">
    <span class="announcement-text">
      ğŸ‰ Festive Offer: <strong>Grab upto 65% off </strong> on all herbal products!
    </span>
    <a routerLink="/product-list" class="announcement-link">Shop Now â†’</a>
    
  </div>
</div>


  <div class="navbar-inner">
    <!-- Left: Logo -->
    <div class="logo">
      <a routerLink="/" style="text-decoration: none;" (click)="closeMenu()">
        <!-- <h2>Ayurs & Herbals</h2> -->
         <img src="assets/logo.jpg" alt="Ayurs & Herbals Logo" class="logo-img" />
      </a>
    </div>

    <!-- Mobile hamburger -->
    <button class="hamburger" aria-label="Toggle menu" (click)="toggleMenu()">
      <span [class.open]="menuOpen">â˜°</span>
    </button>

    <!-- Center: Links (desktop) / collapsible (mobile) -->
    <nav class="nav-links" [class.open]="menuOpen">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMenu()">Home</a>
      <a routerLink="/product-list" routerLinkActive="active" (click)="closeMenu()">Shop</a>
      <a routerLink="/blogs" routerLinkActive="active" (click)="closeMenu()">Blogs</a>
      <a routerLink="/success-stories" routerLinkActive="active" (click)="closeMenu()">Success Stories</a>
      <a routerLink="/about" routerLinkActive="active" (click)="closeMenu()">About</a>
      <a routerLink="/contact" routerLinkActive="active" (click)="closeMenu()">Contact</a>
    </nav>

    <!-- Right: Search + Cart + Login -->
    <div class="nav-actions">
      <div class="search-wrap">
        <input
          type="text"
          class="search-bar"
          placeholder="Search products..."
          [(ngModel)]="searchQuery"
          (input)="onQueryChanged($event.target.value)"
          (focus)="showSuggestions = true"
          (blur)="onSearchBlur()"
          aria-label="Search products"
        />
        <button class="search-btn" (click)="onSearch()">ğŸ”</button>

        <!-- Suggestions dropdown -->
        <ul class="suggestions" *ngIf="showSuggestions && suggestions?.length">
          <li *ngFor="let s of suggestions" (mousedown)="selectSuggestion(s)">
            <img *ngIf="s.images?.length" [src]="imgUrl(s.images[0])" alt="{{s.name}}" />
            <div class="s-text">
              <div class="s-name">{{ s.name }}</div>
              <div class="s-sub">{{ s.subDescription || s.description }}</div>
            </div>
            <div class="s-price">â‚¹{{ s.price | number:'1.0-0' }}</div>
          </li>
        </ul>
      </div>

      <a routerLink="/cart" class="cart" (click)="closeMenu()">
        ğŸ›’
        <span class="cart-count" *ngIf="cartCount > 0">{{ cartCount }}</span>
      </a>

      <!-- User avatar + dropdown -->
<div class="user-wrap" [class.open]="userMenuOpen">
  <!-- Avatar / button -->
  <button class="user-btn" (click)="toggleUserMenu($event)" [attr.aria-expanded]="userMenuOpen" aria-haspopup="true" aria-label="User menu">
    <img *ngIf="userAvatarUrl; else initialsTpl" [src]="userAvatarUrl" alt="User" class="user-avatar" />
    <ng-template #initialsTpl>
      <span class="user-initials">{{ userInitials }}</span>
    </ng-template>
  </button>

  <!-- Dropdown -->
  <ul class="user-dropdown" *ngIf="userMenuOpen" role="menu" (click)="$event.stopPropagation()">
    <li role="none">
      <button role="menuitem"role="menuitem" class="ud-item" (click)="onLogin()" [disabled]="isLoggedIn" [attr.aria-disabled]="isLoggedIn">
        ğŸ” Login
      </button>
    </li>

    <li role="none">
      <button role="menuitem" class="ud-item" (click)="onLogout()" [disabled]="!isLoggedIn" [attr.aria-disabled]="!isLoggedIn">

        â‹ Log Out 
      </button>
    </li>

    <li role="none">
      <button role="menuitem" class="ud-item" (click)="onRegister()" [disabled]="isLoggedIn" [attr.aria-disabled]="isLoggedIn">
        âœï¸ Create Account
      </button>
    </li>
  </ul>
</div>
    </div>
  </div>
</header>

<!-- ===== Mobile Bottom Nav (insert this AFTER the header) ===== -->
<nav class="mobile-bottom-nav" role="navigation" aria-label="Mobile bottom navigation">
  <button class="mb-btn" (click)="goHome()" aria-label="Home">
    <span class="mb-icon">ğŸ </span>
    <span class="mb-label">Home</span>
  </button>

  <button class="mb-btn" (click)="goCart()" aria-label="Cart">
    <span class="mb-icon">ğŸ›’</span>
    <span class="mb-label">Cart</span>
    <span class="mb-badge" *ngIf="cartCount > 0">{{ cartCount }}</span>
  </button>

  <button class="mb-btn" (click)="toggleMenu()" aria-label="Menu" [class.active]="menuOpen">
    <span class="mb-icon">â˜°</span>
    <span class="mb-label">Menu</span>
  </button>

  <button class="mb-btn user-wrap" (click)="toggleUserMenu($event)" aria-haspopup="true" aria-expanded="{{userMenuOpen}}">
    <span class="mb-icon user-avatar" *ngIf="userAvatarUrl; else initialsTpl">
      <img [src]="userAvatarUrl" alt="User avatar" />
    </span>
    <ng-template #initialsTpl>
      <span class="mb-initials">{{ userInitials }}</span>
    </ng-template>
    <span class="mb-label">Account</span>

    <!-- small dropdown (optional, reuse your existing user menu markup if you have one) -->
    <div class="mobile-user-dropdown" *ngIf="userMenuOpen" >
     
      <button  class="ud-item" (click)="onLogin()" >Login</button>
      <button class="ud-item" (click)="onLogout()" *ngIf="isLoggedIn" >Logout</button>
      <button class="ud-item" (click)="onRegister()" >Create account</button>
    </div>
  </button>
</nav>
